---
interface Props {
  headings: Array<{ depth: number; text: string; slug: string }>;
  label?: string;
}

const { headings, label = "Table of Contents" } = Astro.props;

// Filter to only show h2 and h3 headings
const tocHeadings = headings.filter((h) => h.depth >= 2 && h.depth <= 3);
---

{
  tocHeadings.length > 0 && (
    <nav class="toc">
      <h2 class="text-sm font-bold text-gray-900 mb-4 pb-3 border-b border-gray-200">{label}</h2>
      <ul class="space-y-1">
        {tocHeadings.map((heading) => (
          <li class={`toc-item ${heading.depth === 3 ? "toc-item-sub" : ""}`}>
            <a
              href={`#${heading.slug}`}
              class="toc-link block py-2 text-sm text-gray-600 hover:text-[var(--color-primary)] transition-colors border-b border-gray-100"
            >
              {heading.text}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  )
}

<style>
  .toc-item-sub {
    padding-left: 1rem;
  }

  .toc-item-sub .toc-link {
    font-size: 0.8125rem;
    color: #9ca3af;
  }

  .toc-item:last-child .toc-link {
    border-bottom: none;
  }
</style>
